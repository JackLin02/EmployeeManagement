<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssm.dao.UserDao">

<select id="getUser" resultMap="empAndDeptResultMapOne" parameterType="Integer">
	SELECT * FROM user WHERE id=#{id}
</select>

<select id="getUserByEmail" resultMap="empAndDeptResultMapOne" parameterType="String">
	SELECT * FROM user WHERE email=#{email}
</select>

<select id="getAllUser" resultMap="empAndDeptResultMapOne">
	SELECT * FROM user
</select>

<insert id="insertUser" parameterType="User">
	INSERT INTO user VALUES (null,#{name},#{password},#{email},#{birthday},#{status})
</insert>

<update id="updateUser" parameterType="User">
	UPDATE user SET name=#{name}, password=#{password}, email=#{email},
	birthday=#{birthday} WHERE id=#{id}
</update>

<update id="deleteUser" parameterType="User">
	UPDATE user SET status=#{status} WHERE id=#{id}
</update>

<!--注意：多对一有级联属性赋值的方式，一对多则没有这种方式-->
<resultMap id="empAndDeptResultMapOne" type="User">
    <id property="id" column="id"></id>
    <result property="name" column="name"></result>
    <result property="email" column="email"></result>
    <result property="birthday" column="bitthday"></result>
    <result property="status" column="status"></result>
    <result property="userRole.uid" column="userRole.uid"></result>
    <result property="userRole.rid" column="userRole.rid"></result>
</resultMap>

</mapper>